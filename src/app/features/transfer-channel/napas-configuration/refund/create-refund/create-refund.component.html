<div class="search-ctqt">
  <h1 class="title-page">Thêm mới yêu cầu hoàn trả
  </h1>

  <div class="panel mrt-4">
    <div class="panel-heading justify-content-between bdt">
      <label fxFlex="50">{{'Thông tin giao dịch gốc' | uppercase}}</label>
    </div>
    <div class="panel-body panel-padding">
      <form class="mrt-4" [formGroup]="form" fxLayout="row wrap">
        <sm-text-control [item]="$origTransactionReference" fxFlex="25" [form]="form"></sm-text-control>
        <sm-date-control [item]="$fromDate" fxFlex="25" [form]="form"></sm-date-control>
        <div fxFlex="25" style="display: flex; flex-direction: column">
          <sm-date-control [item]="$toDate" fxFlex="25" [form]="form"></sm-date-control>
          <ng-container *ngIf="form.get('toDate')?.invalid && (form.get('toDate')?.dirty || form.get('toDate')?.touched)">
            <span class="error-message" *ngIf="form.get('toDate')?.errors?.['dateOrderInvalid']">Ngày kết thúc không được nhỏ hơn ngày bắt đầu.</span>
            <span class="error-message" *ngIf="form.get('toDate')?.errors?.['dateRangeExceeded']">Khoảng thời gian tìm kiếm không được vượt quá 10 ngày.</span>
          </ng-container>
        </div>

        <div fxFlex="25" fxLayout="row wrap" style="height: 40px; margin-top: 2.125rem;">
          <button type="submit" fxFlex="75" class="btn btn-primary mrr-2" (click)="searchTransactionOrigin()">
            <mat-icon class="mbb-icon ic-search mrl-2"></mat-icon>
            <span>Tìm kiếm</span>
          </button>
          <button type="submit" fxFlex="20" class="btn btn-light-blue" (click)="resetFormSearch()">
            <mat-icon class="mbb-icon ic-refresh mrl-2"></mat-icon>
          </button>
        </div>
      </form>
      <div *ngIf="this.hasDataSource" class="break-line pds-2 mru-4">
        <hr class="line-right">
      </div>

      <div *ngIf="this.hasDataSource" fxLayout="row wrap" class="pds-2">
        <div fxLayout="row" fxFlex="50" class="pdu-4">
          <label fxFlex="30">Tổ chức phát lệnh</label>
          <label style="font-weight: bold;" fxFlex="70"> {{this.dataTransactionOrigin?.acceptingInstitutionIdentificationCode}} - {{this.dataTransactionOrigin?.senderName}} </label>
        </div>
        <div fxLayout="row" fxFlex="50" class="pdu-4">
          <label fxFlex="30">Số thẻ/ số tài khoản gửi</label>
          <label style="font-weight: bold;" fxFlex="70">{{this.dataTransactionOrigin?.fromAccountIdentification}}</label>
        </div>

        <div fxLayout="row" fxFlex="50" class="pdu-4">
          <label fxFlex="30">Tổ chức nhận lệnh</label>
          <label style="font-weight: bold;" fxFlex="70">{{this.dataTransactionOrigin?.receivingInstitutionIdentificationCode}} - {{this.dataTransactionOrigin?.receiverName}}</label>
        </div>
        <div fxLayout="row" fxFlex="50" class="pdu-4">
          <label fxFlex="30">Số thẻ/ số tài khoản nhận</label>
          <label style="font-weight: bold;" fxFlex="70">{{this.dataTransactionOrigin?.toAccountIdentification}}</label>
        </div>

        <div fxLayout="row" fxFlex="50" class="pdu-4">
          <label fxFlex="30">Số tiền giao dịch</label>
          <label style="font-weight: bold;" fxFlex="70">{{this.dataTransactionOrigin?.settlementAmount | currencyMask}}</label>
        </div>
        <div fxLayout="row" fxFlex="50" class="pdu-4">
          <label fxFlex="30">FT hạch toán T24</label>
          <label style="font-weight: bold;" fxFlex="70">{{this.dataTransactionOrigin?.ft}}</label>
        </div>

        <div fxLayout="row" fxFlex="50" class="pdu-4">
          <label fxFlex="30">Nội dung giao dịch</label>
          <label class="custom-css-word" style="font-weight: bold;" fxFlex="70">{{this.dataTransactionOrigin?.contentTransfers}}</label>
        </div>
        <div fxLayout="row" fxFlex="50" class="pdu-4">
          <label fxFlex="30">Trạng thái giao dịch</label>
          <label style="font-weight: bold;" fxFlex="70">{{this.dataTransactionOrigin?.transactionStatus}}</label>
        </div>

      </div>

    </div>
  </div>

  <div *ngIf="this.dataTransactionOrigin" class="panel mrt-4">
    <div class="panel-heading justify-content-between bdt">
      <label fxFlex="50">{{'Thông tin tạo mới yêu cầu hoàn trả' | uppercase}}</label>
    </div>
    <div class="panel-body panel-padding">
      <form class="mrt-4" [formGroup]="form" fxLayout="row wrap">
        <sm-select-control [item]="$returnDataProcessingCode" fxFlex="50" [form]="form"></sm-select-control>
        <sm-text-control [item]="$senderAcc" fxFlex="50" [form]="form"></sm-text-control>
        <sm-text-control class="custom-vnd" #amountValue [item]="$returnDataTransactionAmount" fxFlex="50" [form]="form" (input)="validateMoney($event, $returnDataTransactionAmount.key)"></sm-text-control>
        <sm-text-control [item]="$receiverAcc" fxFlex="50" [form]="form"></sm-text-control>
        <sm-text-control [item]="$returnDataCurrencyCode" fxFlex="50" [form]="form"></sm-text-control>
        <sm-text-control [item]="$contentTransfers" fxFlex="50" [form]="form"></sm-text-control>
        <sm-select-control [item]="$disputeId" fxFlex="50" [form]="form"></sm-select-control>
        <sm-select-control [item]="$transactionAccountingType" fxFlex="50" [form]="form"></sm-select-control>

      </form>
    </div>
  </div>

  <div class="panel panel-bottom dform-child-content">
    <dform-footer [listButton]="listButton" (eventClick)="onClickBtn($event)"></dform-footer>
  </div>
</div>