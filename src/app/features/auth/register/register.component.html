<div class="register-container">
  <div class="register-background">
    <div class="register-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
    </div>
  </div>
  
  <div class="register-content">
    <div class="register-card">
      <div class="register-header">
        <button mat-icon-button 
                class="back-button" 
                (click)="goToLogin()"
                [disabled]="isLoading">
          <mat-icon>arrow_back</mat-icon>
        </button>
        <div class="register-icon">
          <mat-icon>person_add</mat-icon>
        </div>
        <h1 class="register-title">Đăng ký tài khoản</h1>
        <p class="register-subtitle">Tạo tài khoản mới để sử dụng hệ thống</p>
      </div>
      
      <div class="register-form">
        <form [formGroup]="form" class="registration-form">
          <div class="form-row">
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Tên đăng nhập</mat-label>
                <input matInput 
                       formControlName="username" 
                       placeholder="Nhập tên đăng nhập"
                       autocomplete="username">
                <mat-icon matSuffix>person</mat-icon>
                <mat-error *ngIf="form.get('username')?.hasError('required')">
                  Vui lòng nhập tên đăng nhập
                </mat-error>
                <mat-error *ngIf="form.get('username')?.hasError('minlength')">
                  Tên đăng nhập phải có ít nhất 3 ký tự
                </mat-error>
              </mat-form-field>
            </div>
            
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Email</mat-label>
                <input matInput 
                       type="email"
                       formControlName="email" 
                       placeholder="Nhập địa chỉ email"
                       autocomplete="email">
                <mat-icon matSuffix>email</mat-icon>
                <mat-error *ngIf="form.get('email')?.hasError('required')">
                  Vui lòng nhập email
                </mat-error>
                <mat-error *ngIf="form.get('email')?.hasError('email')">
                  Email không hợp lệ
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Họ và tên</mat-label>
                <input matInput 
                       formControlName="fullName" 
                       placeholder="Nhập họ và tên"
                       autocomplete="name">
                <mat-icon matSuffix>badge</mat-icon>
                <mat-error *ngIf="form.get('fullName')?.hasError('required')">
                  Vui lòng nhập họ và tên
                </mat-error>
                <mat-error *ngIf="form.get('fullName')?.hasError('minlength')">
                  Họ và tên phải có ít nhất 2 ký tự
                </mat-error>
              </mat-form-field>
            </div>
            
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Số điện thoại</mat-label>
                <input matInput 
                       type="tel"
                       formControlName="phoneNumber" 
                       placeholder="Nhập số điện thoại"
                       autocomplete="tel">
                <mat-icon matSuffix>phone</mat-icon>
                <mat-error *ngIf="form.get('phoneNumber')?.hasError('required')">
                  Vui lòng nhập số điện thoại
                </mat-error>
                <mat-error *ngIf="form.get('phoneNumber')?.hasError('pattern')">
                  Số điện thoại không hợp lệ
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Mật khẩu</mat-label>
                <input matInput 
                       [type]="hidePassword ? 'password' : 'text'"
                       formControlName="password" 
                       placeholder="Nhập mật khẩu"
                       autocomplete="new-password"
                       (input)="onPasswordChange()">
                <button mat-icon-button 
                        matSuffix 
                        (click)="hidePassword = !hidePassword"
                        [attr.aria-label]="'Hide password'"
                        [attr.aria-pressed]="hidePassword">
                  <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-error *ngIf="form.get('password')?.hasError('required')">
                  Vui lòng nhập mật khẩu
                </mat-error>
                <mat-error *ngIf="form.get('password')?.hasError('minlength')">
                  Mật khẩu phải có ít nhất 6 ký tự
                </mat-error>
              </mat-form-field>
            </div>
            
            <div class="form-group">
              <mat-form-field appearance="outline" class="full-width">
                <mat-label>Xác nhận mật khẩu</mat-label>
                <input matInput 
                       [type]="hideConfirmPassword ? 'password' : 'text'"
                       formControlName="confirmPassword" 
                       placeholder="Nhập lại mật khẩu"
                       autocomplete="new-password"
                       (input)="onPasswordChange()">
                <button mat-icon-button 
                        matSuffix 
                        (click)="hideConfirmPassword = !hideConfirmPassword"
                        [attr.aria-label]="'Hide confirm password'"
                        [attr.aria-pressed]="hideConfirmPassword">
                  <mat-icon>{{hideConfirmPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-error *ngIf="form.get('confirmPassword')?.hasError('required')">
                  Vui lòng xác nhận mật khẩu
                </mat-error>
                <mat-error *ngIf="showPasswordMismatch">
                  Mật khẩu xác nhận không khớp
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          
          <div class="form-actions">
            <button mat-raised-button 
                    color="primary" 
                    class="register-button"
                    (click)="register()"
                    [disabled]="!form.valid || isLoading">
              <mat-icon *ngIf="!isLoading">person_add</mat-icon>
              <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
              <span>{{isLoading ? 'Đang đăng ký...' : 'Đăng ký'}}</span>
            </button>
            
            <button mat-stroked-button 
                    color="primary" 
                    class="login-button"
                    (click)="goToLogin()"
                    [disabled]="isLoading">
              <mat-icon>login</mat-icon>
              <span>Đã có tài khoản? Đăng nhập</span>
            </button>
          </div>
        </form>
      </div>
      
      <div class="register-footer">
        <p class="help-text">
          <mat-icon>info_outline</mat-icon>
          Bằng cách đăng ký, bạn đồng ý với các điều khoản sử dụng của hệ thống
        </p>
      </div>
    </div>
  </div>
</div>
